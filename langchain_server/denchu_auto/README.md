'ã“ã®READMEã¯ AI ã«ã‚ˆã‚Šç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚'

# Denchu Auto Server

é›»æŸ±ãƒã‚§ãƒƒã‚¯æ¥­å‹™ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãƒãƒƒãƒå‡¦ç†å‹LangChainã‚µãƒ¼ãƒãƒ¼ã§ã™ã€‚äº‹å‰å®šç¾©ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚’é †æ¬¡å®Ÿè¡Œã—ã€MCPã‚µãƒ¼ãƒãƒ¼ã¨é€£æºã—ã¦æ¥­å‹™ã‚’å®Œå…¨è‡ªå‹•ã§å‡¦ç†ã—ã¾ã™ã€‚

## ğŸ¯ ç›®çš„

- **æ¥­å‹™è‡ªå‹•åŒ–**: äººæ‰‹ã‚’ä»‹ã•ãªã„é›»æŸ±ãƒã‚§ãƒƒã‚¯å‡¦ç†
- **ãƒãƒƒãƒå®Ÿè¡Œ**: å®šæœŸå®Ÿè¡Œã‚„ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å‡¦ç†ã«æœ€é©
- **ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: LangChain + MCPã®é€£æºä¾‹
- **ãƒ†ã‚¹ãƒˆç’°å¢ƒ**: é–‹ç™ºãƒ»æ¤œè¨¼ç”¨ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
Input Sequence â†’ LangChain Agent â†’ MCP Servers â†’ Report Generation
     â†“                â†“              â†“              â†“
äº‹å‰å®šç¾©ã‚³ãƒãƒ³ãƒ‰ â†’ ReActã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ â†’ ãƒã‚§ãƒƒã‚¯ãƒ„ãƒ¼ãƒ« â†’ Excelå‡ºåŠ›
```

## âœ¨ ç‰¹å¾´

- âœ… **å®Œå…¨è‡ªå‹•åŒ–**: WebUIãªã—ã§ã®æ¥­å‹™å‡¦ç†
- âœ… **äº‹å‰å®šç¾©ã‚·ãƒ¼ã‚±ãƒ³ã‚¹**: app.jsonã§ã‚³ãƒãƒ³ãƒ‰åˆ—ã‚’è¨­å®š
- âœ… **MCPçµ±åˆ**: Javaè£½ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã¨ã®é€£æº
- âœ… **ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ç”Ÿæˆ**: Excelå½¢å¼ã§ã®çµæœå‡ºåŠ›
- âœ… **ã‚«ãƒ©ãƒ¼ãƒ­ã‚°**: å‡¦ç†çŠ¶æ³ã®è¦–è¦šçš„ç¢ºèª
- âœ… **è‡ªå‹•ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤º**: å®Œäº†æ™‚ã®ãƒ¬ãƒãƒ¼ãƒˆè‡ªå‹•ã‚ªãƒ¼ãƒ—ãƒ³

## ğŸ“Š Interactive vs Auto ã®æ¯”è¼ƒ

| æ©Ÿèƒ½ | [Denchu](../denchu) | **Denchu Auto** |
|------|---------------------|-----------------|
| **å®Ÿè¡Œæ–¹å¼** | WebUIçµŒç”±ã®å¯¾è©± | ãƒãƒƒãƒè‡ªå‹•å®Ÿè¡Œ |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ  | äº‹å‰å®šç¾©æ¸ˆã¿ |
| **APIæä¾›** | FastAPI REST | ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ |
| **ãƒ¬ã‚¹ãƒãƒ³ã‚¹** | JSONå½¢å¼ | ã‚³ãƒ³ã‚½ãƒ¼ãƒ«å‡ºåŠ› |
| **ç”¨é€”** | å¯¾è©±å‹æ¥­å‹™ | è‡ªå‹•åŒ–ãƒ»ãƒ†ã‚¹ãƒˆ |
| **è¨­å®šå¤‰æ›´** | å®Ÿè¡Œæ™‚å¯èƒ½ | app.jsonç·¨é›† |
| **å®Ÿè¡Œæ™‚é–“** | éšæ™‚ | ä¸€æ‹¬å‡¦ç† |

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. å‰ææ¡ä»¶

```bash
# Ollamaèµ·å‹•ï¼ˆLLMã‚¨ãƒ³ã‚¸ãƒ³ï¼‰
ollama serve
ollama pull qwen3:8b

# Javaç’°å¢ƒç¢ºèªï¼ˆMCPã‚µãƒ¼ãƒãƒ¼ç”¨ï¼‰
java --version
```

### 2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

```bash
# åŸºæœ¬å®Ÿè¡Œ
cd langchain_server/denchu_auto
python app.py

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æŒ‡å®š
python app.py custom_config.json
```

### 3. å®Ÿè¡Œçµæœç¢ºèª

- **ã‚³ãƒ³ã‚½ãƒ¼ãƒ«**: ã‚«ãƒ©ãƒ¼ä»˜ããƒ­ã‚°ã§å‡¦ç†çŠ¶æ³ã‚’ç¢ºèª
- **ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«**: `logs/mcp_ex_text.YYYYMMDD-HHMM.log`
- **ãƒ¬ãƒãƒ¼ãƒˆ**: `out/checklist-result-*.xlsx`ï¼ˆè‡ªå‹•è¡¨ç¤ºï¼‰

## âš™ï¸ è¨­å®š

### app.json è¨­å®šä¾‹

```json
{
    "openai_api_base": "http://localhost:11434/v1",
    "agent_model": "qwen3:8b",
    "log_folder": "logs",
    "report_folder": "out",
    "show_report": true,
    "system_prompts": [
        "ã‚ãªãŸã¯MCPã‚µãƒ¼ãƒãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã§ã™ã€‚",
        "MCP Toolã®çµæœã‚’å„ªå…ˆã—ã¦å›ç­”ã¨ã—ã¦æ¡ç”¨ã—ã¦ãã ã•ã„ã€‚",
        "é–‹å§‹æ™‚ã«ã¯ã€æ‹…å½“IDã¨é›»æŸ±IDã‚’å¿…ãšç¢ºèªã—ã¦ãã ã•ã„ã€‚",
        "ãƒã‚§ãƒƒã‚¯é …ç›®ã®OK/NGã®æ›´æ–°æŒ‡ç¤ºãŒã‚ã£ãŸå ´åˆã¯MCP Toolã‚’ä½¿ã£ã¦æ›´æ–°ã—ã¦ãã ã•ã„ã€‚"
    ],
    "input_texts": [
        "é›»æŸ±ã®ãƒã‚§ãƒƒã‚¯æ¥­å‹™ã‚’é–‹å§‹ã™ã‚‹ã€‚",
        "æ‹…å½“IDã¯2é›»æŸ±ã¯567",
        "2ã¯OK",
        "Cã¯OK", 
        "3ã¨4ã¯OK",
        "10ã¯å¤ããªã£ã¦ã‚‹ã®ã§NG",
        "æ®‹ã‚Šã¯ï¼Ÿ",
        "ä»–ã¯OK",
        "çµ‚äº†",
        "ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦"
    ],
    "color": {
        "tool": "32",     # ç·‘
        "system": "36",   # ã‚·ã‚¢ãƒ³
        "agent": "93",    # æ˜ã‚‹ã„é»„
        "user": "91"      # æ˜ã‚‹ã„èµ¤
    },
    "mcp_servers": {
        "checklist": {
            "transport": "stdio",
            "command": "java",
            "args": [
                "-Xms64m",
                "-Xmx128m",
                "-jar",
                "./sandbox-mcp-checklist-0.0.1-SNAPSHOT-all.jar",
                "--type", "3",
                "-c", "tcp://localhost:12345"
            ]
        }
    }
}
```

### é‡è¦ãªè¨­å®šé …ç›®

#### input_texts
è‡ªå‹•å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã®é †åºã‚’å®šç¾©ï¼š
```json
"input_texts": [
    "é›»æŸ±ã®ãƒã‚§ãƒƒã‚¯æ¥­å‹™ã‚’é–‹å§‹ã™ã‚‹ã€‚",     // 1. æ¥­å‹™é–‹å§‹
    "æ‹…å½“IDã¯2é›»æŸ±ã¯567",              // 2. IDè¨­å®š
    "2ã¯OK",                          // 3. ãƒã‚§ãƒƒã‚¯é …ç›®å…¥åŠ›
    "çµ‚äº†",                           // 4. æ¥­å‹™çµ‚äº†
    "ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦"            // 5. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
]
```

#### show_report
```json
"show_report": true  // å®Œäº†æ™‚ã«è‡ªå‹•ã§Excelãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã
```

#### ã‚«ãƒ©ãƒ¼è¨­å®š
```json
"color": {
    "tool": "32",    // MCPãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ï¼ˆç·‘ï¼‰
    "system": "36",  // ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆã‚·ã‚¢ãƒ³ï¼‰
    "agent": "93",   // AIã®å¿œç­”ï¼ˆæ˜ã‚‹ã„é»„ï¼‰
    "user": "91"     // ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ï¼ˆæ˜ã‚‹ã„èµ¤ï¼‰
}
```

## ğŸ“‹ å®Ÿè¡Œã‚·ãƒ¼ã‚±ãƒ³ã‚¹ä¾‹

### æ¨™æº–çš„ãªé›»æŸ±ãƒã‚§ãƒƒã‚¯æ¥­å‹™

```
ğŸ”´ user> é›»æŸ±ã®ãƒã‚§ãƒƒã‚¯æ¥­å‹™ã‚’é–‹å§‹ã™ã‚‹ã€‚
ğŸŸ¡ agent> ãƒã‚§ãƒƒã‚¯æ¥­å‹™ã‚’é–‹å§‹ã—ã¾ã™ã€‚æ‹…å½“IDã¨é›»æŸ±IDã‚’æ•™ãˆã¦ãã ã•ã„ã€‚

ğŸ”´ user> æ‹…å½“IDã¯2é›»æŸ±ã¯567
ğŸŸ¢ tool> [æ‹…å½“ID: 2, é›»æŸ±ID: 567 ã§ãƒã‚§ãƒƒã‚¯ã‚’é–‹å§‹]
ğŸŸ¡ agent> æ‹…å½“ID 2ã€é›»æŸ±ID 567ã§ãƒã‚§ãƒƒã‚¯ä½œæ¥­ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚

ğŸ”´ user> 2ã¯OK
ğŸŸ¢ tool> [é …ç›®2ã‚’OKã«è¨­å®š]
ğŸŸ¡ agent> é …ç›®2ã‚’OKã¨ã—ã¦è¨˜éŒ²ã—ã¾ã—ãŸã€‚

ğŸ”´ user> 10ã¯å¤ããªã£ã¦ã‚‹ã®ã§NG  
ğŸŸ¢ tool> [é …ç›®10ã‚’NGã«è¨­å®šã€å‚™è€ƒ: å¤ã„]
ğŸŸ¡ agent> é …ç›®10ã‚’NGã¨ã—ã¦è¨˜éŒ²ã—ã€å‚™è€ƒã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚

ğŸ”´ user> çµ‚äº†
ğŸŸ¡ agent> ãƒã‚§ãƒƒã‚¯ä½œæ¥­ã‚’å®Œäº†ã—ã¾ã™ã€‚

ğŸ”´ user> ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¦
ğŸŸ¢ tool> [Excelãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ: checklist-result-20251027-1234.xlsx]
ğŸŸ¡ agent> ãƒã‚§ãƒƒã‚¯çµæœãƒ¬ãƒãƒ¼ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚
ğŸ”· system> ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ãã¾ã™...checklist-result-20251027-1234.xlsx
```

## ğŸ› ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### 1. ç‹¬è‡ªã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã®ä½œæˆ

```json
{
    "input_texts": [
        "ã‚«ã‚¹ã‚¿ãƒ æ¥­å‹™ã‚’é–‹å§‹",
        "è¨­å®šA: å€¤1",
        "è¨­å®šB: å€¤2", 
        "å®Ÿè¡Œ",
        "çµæœã‚’ä¿å­˜"
    ]
}
```

### 2. MCPã‚µãƒ¼ãƒãƒ¼ã®è¿½åŠ 

```json
{
    "mcp_servers": {
        "checklist": { /* æ—¢å­˜è¨­å®š */ },
        "database": {
            "transport": "stdio",
            "command": "python",
            "args": ["db_mcp_server.py"]
        }
    }
}
```

### 3. å‡ºåŠ›å½¢å¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

```python
# app.pyå†…ã§ä¿®æ­£
def custom_output_format(result):
    # CSVå‡ºåŠ›
    with open('result.csv', 'w') as f:
        f.write(result)
    
    # JSONå‡ºåŠ›
    with open('result.json', 'w') as f:
        json.dump(result, f, ensure_ascii=False)
```

## ğŸ”„ è‡ªå‹•åŒ–ã®å¿œç”¨ä¾‹

### 1. å®šæœŸå®Ÿè¡Œï¼ˆCronï¼‰

```bash
# crontab -e
# æ¯æ—¥åˆå‰9æ™‚ã«å®Ÿè¡Œ
0 9 * * * cd /path/to/denchu_auto && python app.py
```

### 2. ãƒãƒƒãƒã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
#!/bin/bash
# auto_check.sh

cd "$(dirname "$0")"

# è¤‡æ•°ã®è¨­å®šã§é †æ¬¡å®Ÿè¡Œ
for config in configs/*.json; do
    echo "å®Ÿè¡Œä¸­: $config"
    python app.py "$config"
    sleep 5
done

echo "å…¨ãƒãƒƒãƒå‡¦ç†å®Œäº†"
```

### 3. DockeråŒ–

```dockerfile
FROM python:3.9

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .
CMD ["python", "app.py"]
```

## ğŸ“Š ãƒ­ã‚°ã¨ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°

### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«

```python
# DEBUG: è©³ç´°ãªå®Ÿè¡Œæƒ…å ±
# INFO: ä¸€èˆ¬çš„ãªå®Ÿè¡Œæƒ…å ±  
# ERROR: ã‚¨ãƒ©ãƒ¼æƒ…å ±ã®ã¿
logging.basicConfig(level=logging.INFO)
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–

```python
# å®Ÿè¡Œæ™‚é–“è¨ˆæ¸¬
start_time = datetime.datetime.now()
# ... å‡¦ç† ...
end_time = datetime.datetime.now()
duration = end_time - start_time
```

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. MCPã‚µãƒ¼ãƒãƒ¼ã«æ¥ç¶šã§ããªã„

**ç—‡çŠ¶**: Java ãƒ—ãƒ­ã‚»ã‚¹ã®èµ·å‹•ã‚¨ãƒ©ãƒ¼
**è§£æ±º**:
```bash
# Javaç’°å¢ƒç¢ºèª
java --version

# JARãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
ls -la *.jar

# æ‰‹å‹•èµ·å‹•ãƒ†ã‚¹ãƒˆ
java -jar sandbox-mcp-checklist-0.0.1-SNAPSHOT-all.jar
```

#### 2. Ollamaãƒ¢ãƒ‡ãƒ«ã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: Model not found ã‚¨ãƒ©ãƒ¼
**è§£æ±º**:
```bash
# ãƒ¢ãƒ‡ãƒ«ç¢ºèªãƒ»ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
ollama list
ollama pull qwen3:8b

# ã‚µãƒ¼ãƒ“ã‚¹å†èµ·å‹•
ollama serve
```

#### 3. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆã‚¨ãƒ©ãƒ¼

**ç—‡çŠ¶**: Excel ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå¤±æ•—
**è§£æ±º**:
```bash
# å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç¢ºèª
mkdir -p out
chmod 755 out

# æ¨©é™ç¢ºèª
ls -la out/
```

#### 4. è‡ªå‹•ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ç¤ºã®å•é¡Œ

**macOS**:
```bash
# æ¨©é™ç¢ºèª
xattr -d com.apple.quarantine *.xlsx
```

**Windows**:
```powershell
# ãƒ•ã‚¡ã‚¤ãƒ«é–¢é€£ä»˜ã‘ç¢ºèª
assoc .xlsx
```

**Linux**:
```bash
# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
xdg-mime default libreoffice-calc.desktop application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
```

## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
denchu_auto/
â”œâ”€â”€ app.py                           # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ app.json                         # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ logs/                           # ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â””â”€â”€ mcp_ex_text.YYYYMMDD-HHMM.log
â”œâ”€â”€ out/                            # å‡ºåŠ›ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â””â”€â”€ checklist-result-*.xlsx
â””â”€â”€ README.md                       # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ”— é–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

- **[Denchu Interactive](../denchu/README.md)** - WebUIå¯¾å¿œã®å¯¾è©±å‹ç‰ˆ
- **[Simple Server](../simple/README.md)** - åŸºæœ¬çš„ãªLangChainã‚µãƒ¼ãƒãƒ¼  
- **[MCP Blend](../mcp_blend/README.md)** - MCPçµ±åˆã®ã‚µãƒ³ãƒ—ãƒ«
- **[ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ](../../README.md)** - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®èª¬æ˜

## ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹

### å®Ÿè¡Œæ™‚é–“ã®ç›®å®‰

| å‡¦ç†é …ç›®æ•° | å®Ÿè¡Œæ™‚é–“ | ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ |
|-----------|----------|--------------|
| 5é …ç›® | 30-60ç§’ | 2GB |
| 10é …ç›® | 1-2åˆ† | 2GB |
| 20é …ç›® | 2-4åˆ† | 2GB |

### ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

- **CPU**: 2ã‚³ã‚¢ä»¥ä¸Š
- **ãƒ¡ãƒ¢ãƒª**: 4GBä»¥ä¸Šï¼ˆLLMãƒ¢ãƒ‡ãƒ«ã‚’å«ã‚€ï¼‰
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 1GBä»¥ä¸Šã®ç©ºãå®¹é‡
- **Java**: JRE 11ä»¥ä¸Š

## ğŸš€ å°†æ¥ã®æ‹¡å¼µ

- **ä¸¦åˆ—å‡¦ç†**: è¤‡æ•°é›»æŸ±ã®åŒæ™‚ãƒã‚§ãƒƒã‚¯
- **ã‚¯ãƒ©ã‚¦ãƒ‰é€£æº**: AWSã‚„GCPã§ã®å®Ÿè¡Œ
- **APIåŒ–**: REST APIã¨ã—ã¦ã®æä¾›
- **Web Dashboard**: å®Ÿè¡ŒçŠ¶æ³ã®å¯è¦–åŒ–
- **ãƒ¡ãƒ¼ãƒ«é€šçŸ¥**: å®Œäº†æ™‚ã®è‡ªå‹•é€šçŸ¥

---

**æ›´æ–°æ—¥**: 2025å¹´10æœˆ27æ—¥